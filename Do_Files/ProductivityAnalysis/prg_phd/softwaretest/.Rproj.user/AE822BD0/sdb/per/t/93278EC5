{
    "contents" : "# running ti and tvd SFA models on FADN data for multisward\n# tvd in Stata runs slowly and never converges in some cases. Just\n# checking how it performs here.\nrm(list=ls())\nlibrary(\"foreign\")\nlibrary(\"plm\")\nlibrary(\"data.table\")\nlibrary(\"frontier\")\n\ndatadir <- \"/media/MyPassport/Data/data_FADNPanelAnalysis/OutData/FADN_IGM\"\nsetwd(datadir)\n\nfadn <- plm.data(read.dta(\"SFA_post.dta\"), c(\"pid\", \"year\"))\nsave(fadn, file=\"SFA_post.Rdata\")\nload(\"SFA_post.Rdata\")\n# logs of paid and unpaid labour were missing, so calculate them again\n# fadn$lnflabpaid <- log(fadn$flabpaid)\n# fadn$lnflabunpd <- log(fadn$flabunpd)\ncolnames(fadn)[grep(\"GREGION\", names(fadn))] <- c(\"Bretagne\"\n    , \"NormandieHaute\", \"NormandieBasse\", \"Wales\", \"Ireland.too\"\n    , \"Bayern\", \"OtherRegions\")\ncolnames(fadn)[grep(\"COUNTRY\", names(fadn))] <- c(\"Germany\"\n    , \"France\", \"Ireland\", \"UK\")\n\nfadn$year <- as.numeric(fadn$year)\nfadn$pid <- as.numeric(fadn$pid)\n# This is the model's equation (i.e. the list of y the x's)\n# In Stata this is a local macro with just the varnames separated with \n# a space. Here the syntax requires the \"~\" and \"+\" characters between\n# and the COUNTRY dummies have been added to it\nfadn$lndotomkgl <- log(dairyproducts)\nfadn$lndpnolu <- log(dairycows)\n# lnfdairygo_lu_vlist1 <- lndotomkgl ~   \n#       lnfsizuaa + lndaforare + lnflabpaid + lnflabunpd + lndpnolu +\n#       azone2 + azone3 + \n#       France + Ireland + UK + Bretagne + NormandieHaute + NormandieBasse +\n#       Wales + Bayern\nattach(fadn)\n\n# meta frontier, time varying decay model, efficiency effects frontier\n# system.time(meta.model.tvd.eef <- sfa(lnfdairygo_lu_vlist1|ogagehld, fadn, timeEffect=T))\nmeta.model.tvd.eef <- sfa(lndotomkgl ~  lnfsizuaa + \n                      lndaforare + lnflabpaid + \n                      lnflabunpd + lndpnolu +\n                      azone2 + azone3 + \n                      France + Ireland + UK + Bretagne + \n                      NormandieHaute + NormandieBasse +\n                      Wales + Bayern      \n                      |ogagehld + lnfdratio,\n                      fadn, \n                      timeEffect=T)\nte.eef  <- efficiencies(meta.model.tvd.eef, margEff=T)\nhist(te.eef)\n\n\nwrite.csv(summary(meta.model.tvd.eef)[\"mleParam\"], \"../../code_R/FADN_IGM/sfa_tvd_eef2_out_R.csv\")\nsummary(meta.model.tvd.eef)\n\ndir(\"../../code_R/FADN_IGM/\")\n\n",
    "created" : 1365091938753.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4212540983",
    "id" : "93278EC5",
    "lastKnownWriteTime" : 1365150812,
    "path" : "/media/MyPassport/Data/data_FADNPanelAnalysis/code_R/FADN_IGM/fadn_igm2.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}